IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m2)
# PCSE
summary(m2, vcovBK)
# Durbin-Watson Statistics
pdwtest(m2)
# m1_re is a RE model
m2_re  <- plm(DV_nfc_lsplus ~  DV_nfc_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'random')
phtest(m2, m2_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1, #+ #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1, #+ #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m1)
# PCSE
summary(m1, vcovBK)
# Durbin-Watson Statistics
pdwtest(m1)
# m1_re is a RE model
m1_re  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'random')
phtest(m1, m1_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#                       IV_gov_expplus + IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = va, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m1)
# PCSE
summary(m1, vcovBK)
# Durbin-Watson Statistics
pdwtest(m1)
# m1_re is a RE model
m1_re  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'random')
phtest(m1, m1_re)
df <- df %>%
group_by(Country) %>%
mutate(IV_gini_lag1 = dplyr::lag(IV_gini,k=1)) %>%
mutate(IV_giniplus = (IV_gini-IV_gini_lag1)/IV_gini_lag1*100) %>%
mutate(IV_giniplus_lag1 = dplyr::lag(IV_giniplus,k=1)) %>%
mutate(IV_giniplus_lag2 = dplyr::lag(IV_giniplus,k=2)) %>%
ungroup()
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m1)
# PCSE
summary(m1, vcovBK)
# Durbin-Watson Statistics
pdwtest(m1)
# m1_re is a RE model
m1_re  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'random')
phtest(m1, m1_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m1)
# PCSE
summary(m1, vcovBK)
# Durbin-Watson Statistics
pdwtest(m1)
# m1_re is a RE model
m1_re  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m1, m1_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m2  <- plm(DV_nfc_lsplus ~  DV_nfc_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m2)
# PCSE
summary(m2, vcovBK)
# Durbin-Watson Statistics
pdwtest(m2)
# m1_re is a RE model
m2_re  <- plm(DV_nfc_lsplus ~  DV_nfc_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m2, m2_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m3  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m3)
# PCSE
summary(m3, vcovBK)
# Durbin-Watson Statistics
pdwtest(m3)
# m1_re is a RE model
m3_re  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1,
data = df, model = 'random')
phtest(m3, m3_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m3  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m3)
# PCSE
summary(m3, vcovBK)
# Durbin-Watson Statistics
pdwtest(m3)
# m1_re is a RE model
m3_re  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m3, m3_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m3  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m3)
# PCSE
summary(m3, vcovBK)
# Durbin-Watson Statistics
pdwtest(m3)
# m1_re is a RE model
m3_re  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m3, m3_re)
df <- df %>%
group_by(Country) %>%
mutate(IV_fdi_outflow_lag1 = dplyr::lag(IV_fdi_outflow,k=1)) %>%
mutate(IV_fdi_outflowplus = (IV_fdi_outflow-IV_fdi_outflow_lag1)/IV_gini_lag1*100) %>%
mutate(IV_fdi_outflowplus_lag1 = dplyr::lag(IV_fdi_ouflowplus,k=1)) %>%
ungroup()
df <- read.csv("data_processing/financialization_df.csv")
df$X <- NULL
df <- df %>%
filter(Year >= 1960)
colnames(df)
df <- df %>%
group_by(Country) %>%
mutate(IV_gini_lag1 = dplyr::lag(IV_gini,k=1)) %>%
mutate(IV_giniplus = (IV_gini-IV_gini_lag1)/IV_gini_lag1*100) %>%
mutate(IV_giniplus_lag1 = dplyr::lag(IV_giniplus,k=1)) %>%
mutate(IV_giniplus_lag2 = dplyr::lag(IV_giniplus,k=2)) %>%
ungroup()
df <- df %>%
group_by(Country) %>%
mutate(IV_fdi_outflow_lag1 = dplyr::lag(IV_fdi_outflow,k=1)) %>%
mutate(IV_fdi_outflowplus = (IV_fdi_outflow-IV_fdi_outflow_lag1)/IV_gini_lag1*100) %>%
mutate(IV_fdi_outflowplus_lag1 = dplyr::lag(IV_fdi_ouflowplus,k=1)) %>%
ungroup()
df <- df %>%
group_by(Country) %>%
mutate(IV_fdi_outflow_lag1 = dplyr::lag(IV_fdi_outflow,k=1)) %>%
mutate(IV_fdi_outflowplus = (IV_fdi_outflow-IV_fdi_outflow_lag1)/IV_gini_lag1*100) %>%
mutate(IV_fdi_outflowplus_lag1 = dplyr::lag(IV_fdi_outflowplus,k=1)) %>%
ungroup()
turn_na <- function(a){
a[abs(a)>10^10] <- NA
a
}
for(i in 2:length(df)){
df[,i] <- lapply(df[,i], turn_na)
}
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m1  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 + #IV_fdi_outflowplus_lag2 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m1)
# PCSE
summary(m1, vcovBK)
# Durbin-Watson Statistics
pdwtest(m1)
# m1_re is a RE model
m1_re  <- plm(DV_VAplus ~  DV_VAplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m1, m1_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m2  <- plm(DV_nfc_lsplus ~  DV_nfc_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m2)
# PCSE
summary(m2, vcovBK)
# Durbin-Watson Statistics
pdwtest(m2)
# m1_re is a RE model
m2_re  <- plm(DV_nfc_lsplus ~  DV_nfc_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_gini + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m2, m2_re)
library(Matrix)
library(plm)
library(car)
library(lmtest)
# m1 is an FE model
m3  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'within',
effect = 'twoways', index = c('Country', 'Year'))
summary(m3)
# PCSE
summary(m3, vcovBK)
# Durbin-Watson Statistics
pdwtest(m3)
# m1_re is a RE model
m3_re  <- plm(DV_hh_lsplus ~  DV_hh_lsplus_lag1 +
IV_lendingplus + IV_lendingplus_lag1 + #IV_lendingplus_lag2 +
#IV_gov_expplus + #IV_gov_expplus_lag1 + #IV_gov_expplus_lag2 +
IV_giniplus + #IV_giniplus_lag1 + #IV_giniplus_lag2 +
IV_trade_balanceplus + IV_trade_balanceplus_lag1 + #IV_trade_balanceplus_lag2 +
IV_fdi_outflowplus + IV_fdi_outflowplus_lag1 +
C_m2plus + C_REERplus + C_gdpplus + C_cpiplus,
data = df, model = 'random')
phtest(m3, m3_re)
library(Hmisc)
describe(df$IV_fdi_outflowplus)
if (!require("pacman")) install.packages("pacman")
p_load(data.table, tidyverse, Hmisc, Matrix, lfe, plm, dynlm, car, lmtest, tseries, broom, knitr)
df <- read.csv("data_processing/financialization_df.csv")
df$X <- NULL
df <- df %>%
filter(Year >= 1960)
colnames(df)
library(Hmisc)
describe(df$IV_fdi_outflowplus)
df <- df %>%
group_by(Country) %>%
mutate(IV_fdi_outflow_lag1 = dplyr::lag(IV_fdi_outflow,k=1)) %>%
mutate(IV_fdi_outflowplus = (IV_fdi_outflow-IV_fdi_outflow_lag1)/IV_fdi_outflow_lag1*100) %>%
mutate(IV_fdi_outflowplus_lag1 = dplyr::lag(IV_fdi_outflowplus,k=1)) %>%
ungroup()
library(Hmisc)
describe(df$IV_fdi_outflowplus)
if (!require("pacman")) install.packages("pacman")
p_load(data.table, tidyverse, Hmisc, Matrix, lfe, plm, dynlm, car, lmtest, tseries, broom, knitr)
df <- read.csv("data_processing/financialization_df.csv")
library(tidyverse)
wiid <- read_csv("./data_source/wiid.csv")
wiid$quality <- factor(wiid$quality,
levels = c("High","Average","Low","Not Known"))
wiid$source <- factor(wiid$source,
levels = c("United Nations", "World Bank", "OECD Other international organizations", "Eurostat","SEDLAC",
"Luxembourg Income Study", "National statistical authority", "Research study"))
wiid$resource <- factor(wiid$resource,
levels = c("Income (net)", "Income (net/gross)", "Income (gross)", "Earnings", "Consumption"))
wiid$scale <- factor(wiid$scale,
levels = c("Per capita", "No adjustment", "Equivalized"))
wiid$popcovr <- factor(wiid$popcovr,
levels = c("All", "Economically active", "Specific categories"))
wiid$sharing_unit <- factor(wiid$sharing_unit,
levels = c("Household", "Family", "Tax unit", "Person"))
wiid <- wiid[order(wiid$country, wiid$year, wiid$quality, wiid$source),]
select_wiid <- wiid %>%
filter(resource == "Income (net)",
scale == "Per capita",
sharing_unit == "Household",
areacovr == "All",
popcovr == "All")
strict_gini <- select_wiid[duplicated(cbind(select_wiid$country, select_wiid$year))==F,]
wiid <- wiid[order(wiid$country, wiid$year, wiid$quality, wiid$scale, wiid$resource, wiid$source, wiid$popcovr, wiid$sharing_unit),]
select_wiid <- wiid %>%
filter(areacovr == "All")
relaxed_gini <- select_wiid[duplicated(cbind(select_wiid$country, select_wiid$year))==F,]
rm(select_wiid)
View(strict_gini)
View(relaxed_gini)
write.csv(relaxed_gini, '..\data_source\relaxed_gini.csv')
write.csv(relaxed_gini, '../data_source/relaxed_gini.csv')
write.csv(relaxed_gini, 'relaxed_gini.csv')
library(tidyverse)
wiid <- read_csv("./data_source/wiid.csv")
wiid$quality <- factor(wiid$quality,
levels = c("High","Average","Low","Not Known"))
wiid$source <- factor(wiid$source,
levels = c("United Nations", "World Bank", "OECD Other international organizations", "Eurostat","SEDLAC",
"Luxembourg Income Study", "National statistical authority", "Research study"))
wiid$resource <- factor(wiid$resource,
levels = c("Income (net)", "Income (net/gross)", "Income (gross)", "Earnings", "Consumption"))
wiid$scale <- factor(wiid$scale,
levels = c("Per capita", "No adjustment", "Equivalized"))
wiid$popcovr <- factor(wiid$popcovr,
levels = c("All", "Economically active", "Specific categories"))
wiid$sharing_unit <- factor(wiid$sharing_unit,
levels = c("Household", "Family", "Tax unit", "Person"))
## strict version
## In this version, the variables of resource, scale, sharing_unit, areacovr, popcovr must fit pre-determined required.
## Duplicated rows are selected by quality and source
wiid <- wiid[order(wiid$country, wiid$year, wiid$quality, wiid$source),]
select_wiid <- wiid %>%
filter(resource == "Income (net)",
scale == "Per capita",
sharing_unit == "Household",
areacovr == "All",
popcovr == "All")
strict_gini <- select_wiid[duplicated(cbind(select_wiid$country, select_wiid$year))==F,]
### strict_gini has 1183 obs.
## relaxed version
## in this version, only arecovr is required to be "All",
## for other variables, we look for the second or third best if the best data are not available.
wiid <- wiid[order(wiid$country, wiid$year, wiid$quality, wiid$scale, wiid$resource, wiid$source, wiid$popcovr, wiid$sharing_unit),]
select_wiid <- wiid %>%
filter(areacovr == "All")
relaxed_gini <- select_wiid[duplicated(cbind(select_wiid$country, select_wiid$year))==F,]
## relaxed_gini has 3548 obs
rm(select_wiid)
write.csv(relaxed_gini, '../data_source/relaxed_gini.csv')
write.csv(relaxed_gini, "../data_source/relaxed_gini.csv")
